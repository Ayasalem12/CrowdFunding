
<section style="background-color: #eee; margin-top:4rem; padding:0 4rem 0;">
  <div class="container py-5">
  
    <h2 class="text-center text-primary-emphasis">Edit Profile</h2>
    <div class="row">
      <div class="col">
        <nav aria-label="breadcrumb" class="bg-body-tertiary rounded-3 p-3 mb-4">
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item"><a routerLink='/profile' routerLinkActive="router-link-active" >User Profile</a></li>
            <li class="breadcrumb-item active" aria-current="page">Edit Profile</li>
          </ol>
        </nav>
      </div>
    </div>
    <p>Form Status: {{ profileForm.status }}</p>
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="row g-3">
      <div class="col-md-7 mt-md-5">
        <label class="form-label text-dark-emphasis" for="user-image" >Profile Image</label>
        <div class="mb-2">
          <img [src]="userImage" alt="Profile Image" class="rounded-circle" width="100" height="100">
        </div>
        <input id="user-image" formControlName="image" type="file" class="form-control" accept="image/*">
      </div>
      <!-- UserName -->
      <div class="col-md-7 mt-md-5">
        <label for="user-name" class="form-label text-dark-emphasis ">Username</label>
        <input type="text" class="form-control bg-dark text-light" id="user-name"  formControlName="userName">
      </div>
      
      <!-- FirstName -->
      <div class="col-md-7 mt-md-2">
        <label for="first-name" class="form-label text-dark-emphasis ">First Name</label>
        <input type="text" class="form-control" id="first-name"  formControlName="firstName">
        @if (firstName?.touched && firstName?.invalid) {
          <div class="invalid-feedback">
            @if (firstName?.errors?.['required']) {
              <div>First name is required.</div>
            }
          </div>
        }
      </div>
      
      
      <!-- LastName -->
      <div class="col-md-7 mt-md-4">
        <label for="last-name" class="form-label text-dark-emphasis ">Last Name</label>
        <input type="text" class="form-control" id="last-name"  formControlName="lastName">
        @if (lastName?.touched && lastName?.invalid) {
          <div class="invalid-feedback ">
            @if (lastName?.errors?.['required']) {
              <div>Last name is required.</div>
            }
          </div>
        }
      </div>
      <!-- Email -->
      <div class="col-md-7 mt-md-4">
        <label for="user-email" class="form-label text-dark-emphasis">Email</label>
        <input type="email" class="form-control" id="user-email"  formControlName="email" required>
        @if (email?.touched && email?.invalid) {
          <div class="invalid-feedback">
            @if (email?.errors?.['required']) {
              <div>Email is required.</div>
            }
            @if (email?.errors?.['email']) {
              <div>Please enter a valid email address.</div>
            }
          </div>
        }
      </div>
      <!-- Address -->
      <div formGroupName="address" class="col-md-7 mt-md-4">
        <h2>Address</h2>
        <label for="address-state" class="form-label text-dark-emphasis">State</label>
        <input type="text" class="form-control" id="address-state"  formControlName="state" >
        @if (address?.get('state')?.touched && address?.get('state')?.invalid) {
          <div class="text-danger">
            @if (address?.get('state')?.errors?.['required']) {
              <div>State is required.</div>
            }
          </div>
        }
        <label for="address-city" class="form-label text-dark-emphasis">City</label>
        <input type="text" class="form-control" id="address-city"  formControlName="city" >
        @if (address?.get('city')?.touched && address?.get('city')?.invalid) {
          <div class="text-danger">
            @if (address?.get('city')?.errors?.['required']) {
              <div>City is required.</div>
            }
          </div>
        }
        <label for="address-street" class="form-label text-dark-emphasis">Street</label>
        <input type="email" class="form-control" id="address-street"  formControlName="street" >
        @if (address?.get('street')?.touched && address?.get('street')?.invalid) {
          <div class="text-danger">
            @if (address?.get('street')?.errors?.['required']) {
              <div>Street is required.</div>
            }
          </div>
        }
      </div>
      <!-- Phone -->
      <div formArrayName="phones" class="col-md-7 mt-md-4">
        <h2>Phone</h2>
        @for (phone of phones.controls; track $index; let i = $index ){
          <input type="text" class="form-control my-3" id="user-phone-{{i}}"  [formControlName]="i">
          <label for="user-phone-{{i}}" class="form-label text-dark-emphasis me-2">Phone number {{i+1}}</label>
          @if (phones.at(i).touched && phones.at(i).invalid) {
            <div class="invalid-feedback">
              @if (phones.at(i).errors?.['required']) {
                <div>Phone number is required.</div>
              }
              @if (phones.at(i).errors?.['pattern']) {
                <div>Please enter a valid phone number</div>
              }
            </div>
          }
          <button type="button" class="btn bg-danger text-light btn-sm mt-2 me-3" (click)="removePhone(i)" [disabled]="phones.length<=1">X</button>
        }
        <button type="button" class="btn bg-dark text-light btn-sm mt-2" (click)="addPhone()">Add Another Phone</button>
      </div>
      <!-- <div class="col-12">
        <label classs="form-label text-dark">Phone Numbers</label>
        <div formArrayName="phones">
          @for (phone of phones.controls; track $index; let i = $index) {
            <div class="d-flex mb-2 align-items-center">
              <div class="form-outline flex-grow-1">
                <input type="text" class="form-control" id="user-phone-{{i}}" [formControlName]="i">
                <label class="form-label" for="user-phone-{{i}}">Phone {{i + 1}}</label>
              </div>
              <button type="button" class="btn btn-danger ms-2" (click)="removePhone(i)" [disabled]="phones.length <= 1">X</button>
            </div>
          }
        </div>
        <button type="button" class="btn bg-dark text-light btn-sm mt-2" (click)="addPhone()">Add Phone</button>
      </div> -->
      
      <div class="col-12">
        <button type="submit"[disabled]="!profileForm.valid" class="btn bg-dark text-light">Save Changes</button>
        <button type="button" class="btn btn-danger ms-2" routerLink="/">Cancel</button>
      </div>
    </form>
  </div>
</section>















<!-- <section style="background-color: #eee; margin-top: 4rem; padding: 0 6rem;">
  <div class="container py-5">
    <h2 class="text-center text-primary-emphasis mb-5">Edit Profile</h2>

    <div class="row">
      <div class="col">
        <nav aria-label="breadcrumb" class="bg-body-tertiary rounded-3 p-3 mb-4">
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
            <li class="breadcrumb-item"><a routerLink="/profile" routerLinkActive="router-link-active">User Profile</a></li>
            <li class="breadcrumb-item active" aria-current="page">Edit Profile</li>
          </ol>
        </nav>
      </div>
    </div>

    <form  class="row g-3">
       
      <div class="col-md-7 mt-md-5">
        <label class="form-label text-dark-emphasis fw-bolder">Profile Image</label>
        <div class="mb-2">
          <img [src]="userImage" alt="Profile Image" class="rounded-circle" width="100" height="100" style="object-fit: cover;">
        </div>
        <input type="file" class="form-control" accept="image/*">
      </div>

      
      <div class="col-md-5">
        <div class="row g-3">
          
          <div class="col-12">
            <div class="form-outline ">
              <input type="text" id="username" class="form-control  bg-dark-subtle"  name="username" disabled>
              <label class="form-label text-dark-emphasis" for="username">Username</label>
            </div>
          </div>

          
          <div class="col-12">
            <div class="form-outline">
              <input type="email" id="email" class="form-control bg-dark-subtle"  name="email" required>
              <label class="form-label" for="email">Email Address</label>
            </div>
          </div>

          
          <div class="col-12">
            <div class="form-outline">
              <input type="text" id="firstName" class="form-control bg-dark-subtle"  name="first_name">
              <label class="form-label" for="firstName">First Name</label>
            </div>
          </div>

          
          <div class="col-12">
            <div class="form-outline">
              <input type="text" id="lastName" class="form-control bg-dark-subtle"  name="last_name">
              <label class="form-label text-dark-emphasis fw-bolder" for="lastName">Last Name</label>
            </div>
          </div>
        </div>
      </div>

      
      <div class="col-12 mt-4">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <button type="button" class="btn btn-secondary ms-2" routerLink="/">Cancel</button>
      </div>
    </form>
  </div>
</section> -->
